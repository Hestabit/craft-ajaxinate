(function(a){"use strict";let b=a("#js_Hb_LoadMore"),c=a(".propFilter");a.fn.loadData=function(c){b.show();+b.attr("data-currentpage");let d=a.extend({path:null,data:null,action:"updatebtn",containerClass:".ajaxDataDump",messageClass:".js_elMessage",[window.Craft.csrfTokenName]:window.Craft.csrfTokenValue},c);if(a(d.messageClass).html(""),"reset"==d.action)return a(d.containerClass).html(""),!0;let e=a.post({url:d.path,dataType:"json",data:d,enctype:"multipart/form-data"});e.done(function(c){"updatebtn"==d.action&&(b.attr("data-limit",+c.limit),b.attr("data-totalPages",+c.totalPages)),c.entries&&"init"!=c.entries&&a(d.containerClass).append(c.entries),("sorting"==d.action||"catFilter"==d.action)&&c.entries&&"init"!=c.entries&&a(d.containerClass).html(c.entries),null==c.entries&&(a(d.messageClass).html(c.message),b.hide())}),e.fail(function(a,b){alert("Request failed: "+b)})},a.fn.onload=function(){let b={[window.Craft.csrfTokenName]:window.Craft.csrfTokenValue};a.fn.loadData({path:"/actions/craft-ajaxinate/default/plugin-init",data:b})},a.fn.onload(),b.on("click",function(){try{var c=+b.attr("data-currentpage");b.attr("data-currentpage",+ ++c);let d=+b.attr("data-sorting"),e=Array(b.attr("data-catfilter")),f=JSON.parse(b.attr("data-extrafilter"));a.fn.loadData({path:"/actions/craft-ajaxinate/default/load-more",action:"loadmore",currentpage:c,sorting:d,catfilter:e,extrafilter:f})}catch(a){console.log(a)}}),a("#hb_sorting").on("change",function(){let c=a(this),d=c.children("option:selected").val();b.attr("data-sorting",+d),b.attr("data-currentpage",1),a.fn.loadData({path:"/actions/craft-ajaxinate/default/load-more",action:"sorting",sorting:+d,currentpage:1})}),a("input[name='cat']").on("change",function(){let c=[];a.each(a("input[name='cat']:checked"),function(){c.push(a(this).val())});let d=+b.attr("data-sorting"),e=Array(b.attr("data-catfilter")),f=JSON.parse(b.attr("data-extrafilter"));b.attr("data-currentpage",1),a.fn.loadData({path:"/actions/craft-ajaxinate/default/load-more",action:"catFilter",catfilter:c,sorting:d,extrafilter:f,currentpage:1}),b.attr("data-catfilter",c)}),a("#js_ResetBtn").on("click",function(){b.attr("data-currentpage",0),b.attr("data-totalpages",0),b.attr("data-sorting",0),b.attr("data-catfilter",""),b.attr("data-extrafilter","[{}]");var c=a.fn.loadData({action:"reset"});c&&(a(".js_eFilterO").prop("checked",!1),a(".js_Cat").prop("checked",!1))}),a(".js_eFilterO").on("change",()=>{let c=[];a.each(a(".js_eFilterO"),function(){let b=a(this).attr("type"),d=a(this).val(),e=a(this).attr("name"),f=a(this).attr("data-ftype");"range"==b&&c.push({handle:e,value:d,ftype:f}),a(this).prop("checked")&&c.push({handle:e,value:d,ftype:f})}),b.attr("data-currentpage",1),b.attr("data-extrafilter",JSON.stringify(c));let d=Array(b.attr("data-catfilter")),e=+b.attr("data-sorting");a.fn.loadData({path:"/actions/craft-ajaxinate/default/load-more",action:"catFilter",extrafilter:c,catfilter:d,currentpage:1,sorting:e})})})(jQuery);
