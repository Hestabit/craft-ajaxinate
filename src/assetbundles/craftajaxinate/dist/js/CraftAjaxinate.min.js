!function(t){"use strict";let a,e=!1,r=t("#js_Hb_LoadMore"),n=(t(".propFilter"),t("#js_Hb_Loader")),i=!!Boolean(r.attr("data-scrollActive"))&&Boolean(r.attr("data-scrollActive")),o=0;const s=Number(r.attr("data-pagesToLoad")),l=Number(r.attr("data-bottomOffset"));t.fn.loadData=function(a){n.show();Number(r.attr("data-currentpage"));let i=t.extend({path:null,data:null,action:"init",containerClass:".ajaxDataDump",messageClass:".js_elMessage",[window.Craft.csrfTokenName]:window.Craft.csrfTokenValue},a);t(i.messageClass).html(""),"reset"==i.action&&t(i.containerClass).html("");let o=t.post({url:i.path,dataType:"json",data:i,enctype:"multipart/form-data"});o.done(function(a){e=!1,n.hide(),"init"==i.action&&r.attr("data-limit",Number(a.limit)),a.entries&&""!=a.entries&&t(i.containerClass).append(a.entries),"sorting"!=i.action&&"catFilter"!=i.action||a.entries&&""!=a.entries&&t(i.containerClass).html(a.entries),null==a.entries?(r.attr("data-status",Number(0)),t(i.messageClass).html(a.message),r.hide()):r.attr("data-status",Number(1))}),o.fail(function(t,a){alert("Request failed: "+a)})},t.fn.onload=function(){let a={[window.Craft.csrfTokenName]:window.Craft.csrfTokenValue};var e=Number(r.attr("data-currentpage"));let n=t("#js_ajaxinateRender").data("settings");r.attr("data-currentpage",Number(++e)),t.fn.loadData({path:"/actions/craft-ajaxinate/default/plugin-init",data:a,currentpage:e,settings:n})},t.fn.onload(),r.on("click",function(){o=0,c()}),t("#hb_sorting").on("change",function(){o=0;let a=t(this).children("option:selected").val(),e=t("#js_ajaxinateRender").data("settings");r.attr("data-sorting",Number(a)),r.attr("data-currentpage",Number(1)),t.fn.loadData({path:"/actions/craft-ajaxinate/default/load-more",action:"sorting",sorting:Number(a),currentpage:1,settings:e})}),t("input[name='cat']").on("change",function(){o=0;let a=[];t.each(t("input[name='cat']:checked"),function(){a.push(t(this).val())});let e=Number(r.attr("data-sorting")),n=(Array(r.attr("data-catfilter")),JSON.parse(r.attr("data-extrafilter"))),i=t("#js_ajaxinateRender").data("settings");r.attr("data-currentpage",Number(1)),t.fn.loadData({path:"/actions/craft-ajaxinate/default/load-more",action:"catFilter",catfilter:a,sorting:e,extrafilter:n,currentpage:1,settings:i}),r.attr("data-catfilter",a)}),t("#js_ResetBtn").on("click",function(){o=0,g(100),r.attr("data-currentpage",Number(1)),r.attr("data-sorting",Number(0)),r.attr("data-catfilter",""),r.attr("data-extrafilter","[{}]");var a=Number(r.attr("data-currentpage"));let e=t("#js_ajaxinateRender").data("settings");t.fn.loadData({action:"reset",path:"/actions/craft-ajaxinate/default/plugin-init",currentpage:a,settings:e});t(".js_eFilterO").prop("checked",!1),t(".js_Cat").prop("checked",!1)}),t(".js_eFilterO").on("change",a=>{o=0;let e=[],n=t("#js_ajaxinateRender").data("settings");t.each(t(".js_eFilterO"),function(){let a=t(this).attr("type"),r=t(this).val(),n=t(this).attr("name"),i=t(this).attr("data-ftype");"range"==a&&e.push({handle:n,value:r,ftype:i}),t(this).prop("checked")&&e.push({handle:n,value:r,ftype:i})}),r.attr("data-currentpage",Number(1)),r.attr("data-extrafilter",JSON.stringify(e));let i=Array(r.attr("data-catfilter")),s=Number(r.attr("data-sorting"));t.fn.loadData({path:"/actions/craft-ajaxinate/default/load-more",action:"catFilter",extrafilter:e,catfilter:i,currentpage:1,sorting:s,settings:n})});const c=()=>{try{let a=Number(r.attr("data-currentpage"));r.attr("data-currentpage",Number(++a));let e=Number(r.attr("data-sorting")),n=Array(r.attr("data-catfilter")),i=JSON.parse(r.attr("data-extrafilter")),o=t("#js_ajaxinateRender").data("settings");t.fn.loadData({path:"/actions/craft-ajaxinate/default/load-more",action:"loadmore",currentpage:a,sorting:e,catfilter:n,extrafilter:i,settings:o})}catch(t){console.log(`Error occured in craft-ajaxinate :: ${t}`)}};i&&t(window).scroll(function(){let t=Number(r.attr("data-status"));if(e)return!1;if(!t)return!1;r.hide();let a=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0;if(document.body.offsetHeight-(window.innerHeight+a)<l){if(e=!0,o>=s)return t&&r.show(),!1;o++,requestAnimationFrame(d)}});let d=(u=c,f=350,function(){var t=this,a=arguments,e=p&&!m;clearTimeout(m),m=setTimeout(function(){m=null,p||u.apply(t,a)},f),e&&u.apply(t,a)});var u,f,p,m;function g(t=10){0!=(document.body.scrollTop||document.documentElement.scrollTop)?(window.scrollBy(0,-20),a=setTimeout(g,t)):clearTimeout(a)}}(jQuery);
